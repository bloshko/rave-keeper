[gd_scene load_steps=24 format=3 uid="uid://bvlerh2hfayrm"]

[ext_resource type="Script" uid="uid://cjrtt4vyburuq" path="res://prototyping/music_manager.gd" id="1_sugp2"]
[ext_resource type="Script" uid="uid://cweqg3v7yv2sh" path="res://scripts/enemy_manager.gd" id="1_tbgi4"]
[ext_resource type="PackedScene" uid="uid://cvpwbb3vlsd0p" path="res://scenes/enemy.tscn" id="2_tefeu"]
[ext_resource type="AudioStream" uid="uid://blqy2s23oueyo" path="res://audio/tick.mp3" id="2_tipki"]
[ext_resource type="AudioStream" uid="uid://bcx62ldj5k2a1" path="res://audio/ravekeeper_level2_v2.ogg" id="3_o6xl0"]
[ext_resource type="PackedScene" uid="uid://chplmoaodo7pw" path="res://scenes/human.tscn" id="7_85g3d"]
[ext_resource type="Script" uid="uid://c8kdxjgevcjb" path="res://scripts/track_loader.gd" id="7_o6xl0"]
[ext_resource type="Script" uid="uid://nnfeopgtwof" path="res://scenes/gargoyle_map.gd" id="8_85g3d"]
[ext_resource type="PackedScene" uid="uid://dmpfoykm450ag" path="res://models/church.fbx" id="8_choun"]
[ext_resource type="PackedScene" uid="uid://df5o1158j5pe6" path="res://scenes/gargoyle_map.tscn" id="8_tipki"]
[ext_resource type="PackedScene" path="res://scenes/g_boy.tscn" id="9_85g3d"]
[ext_resource type="Shader" uid="uid://dly7hb4ylq38g" path="res://shaders/postprocess.gdshader" id="11_ya4ey"]
[ext_resource type="PackedScene" path="res://scenes/gameplay_manager.tscn" id="12_eb6dy"]
[ext_resource type="PackedScene" path="res://scenes/game_ui.tscn" id="13_trceg"]
[ext_resource type="Script" uid="uid://b1sk57ijn1gy6" path="res://scripts/shaderbox.gd" id="15_jkv2x"]

[sub_resource type="BoxMesh" id="BoxMesh_jyhfs"]

[sub_resource type="BoxMesh" id="BoxMesh_o6xl0"]

[sub_resource type="BoxMesh" id="BoxMesh_tbgi4"]

[sub_resource type="BoxMesh" id="BoxMesh_tefeu"]

[sub_resource type="Gradient" id="Gradient_jkv2x"]
interpolation_mode = 1
offsets = PackedFloat32Array(0, 0.0625, 0.125, 0.1875)
colors = PackedColorArray(0, 0, 0, 1, 0.381339, 0.377011, 0.353786, 1, 1, 1, 1, 1, 1, 0.310206, 0.458974, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_jbj1t"]
gradient = SubResource("Gradient_jkv2x")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_muem4"]
render_priority = 0
shader = ExtResource("11_ya4ey")
shader_parameter/rows = 2.0
shader_parameter/cols = 2.0
shader_parameter/pal = SubResource("GradientTexture1D_jbj1t")
shader_parameter/dither_size = 5.41
shader_parameter/dither_amount = 0.69

[sub_resource type="BoxMesh" id="BoxMesh_trceg"]

[node name="Main" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.772093, -0.0902697, 0.629065, -0.255389, 0.862341, 0.4372, -0.581935, -0.498216, 0.642754, -2.93093, 0, 5.27995)

[node name="MusicManager" type="Node" parent="."]
script = ExtResource("1_sugp2")
move_step = 2

[node name="PreTick" type="AudioStreamPlayer" parent="MusicManager"]
stream = ExtResource("2_tipki")

[node name="MainTrack" type="AudioStreamPlayer" parent="MusicManager"]
stream = ExtResource("3_o6xl0")

[node name="TrackLoader" type="Node" parent="MusicManager"]
script = ExtResource("7_o6xl0")

[node name="Lanes" type="Node3D" parent="."]

[node name="Lane1" type="Node3D" parent="Lanes"]

[node name="FinishLane" type="MeshInstance3D" parent="Lanes/Lane1"]
transform = Transform3D(0.399145, 0, -0.0261473, 0, 0.4, 0, 0.0261473, 0, 0.399145, -3.294, 0, 2.621)
visible = false
mesh = SubResource("BoxMesh_jyhfs")
skeleton = NodePath("../..")

[node name="StartLane" type="MeshInstance3D" parent="Lanes/Lane1"]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, -2.594, 0, 7.067)
visible = false
mesh = SubResource("BoxMesh_o6xl0")
skeleton = NodePath("")

[node name="Enemies" type="Node3D" parent="Lanes/Lane1"]

[node name="GSpot" type="Node3D" parent="Lanes/Lane1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.41097, 1.45211, 2.39303)

[node name="Humans" type="Node3D" parent="Lanes/Lane1"]

[node name="Lane2" type="Node3D" parent="Lanes"]

[node name="FinishLane" type="MeshInstance3D" parent="Lanes/Lane2"]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, -2.307, 0, 2.663)
visible = false
mesh = SubResource("BoxMesh_tbgi4")
skeleton = NodePath("../..")

[node name="StartLane" type="MeshInstance3D" parent="Lanes/Lane2"]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, -1.484, 0, 7.067)
visible = false
mesh = SubResource("BoxMesh_o6xl0")
skeleton = NodePath("")

[node name="Enemies" type="Node3D" parent="Lanes/Lane2"]

[node name="GSpot" type="Node3D" parent="Lanes/Lane2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.46486, 1.45211, 2.39303)

[node name="Humans" type="Node3D" parent="Lanes/Lane2"]

[node name="Lane3" type="Node3D" parent="Lanes"]

[node name="FinishLane" type="MeshInstance3D" parent="Lanes/Lane3"]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, -1.242, 0, 2.756)
visible = false
mesh = SubResource("BoxMesh_tefeu")
skeleton = NodePath("../..")

[node name="StartLane" type="MeshInstance3D" parent="Lanes/Lane3"]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, -0.349336, 0, 7.067)
visible = false
mesh = SubResource("BoxMesh_o6xl0")
skeleton = NodePath("")

[node name="Enemies" type="Node3D" parent="Lanes/Lane3"]

[node name="GSpot" type="Node3D" parent="Lanes/Lane3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.58838, 1.45211, 2.39303)

[node name="Humans" type="Node3D" parent="Lanes/Lane3"]

[node name="EnemyManager" type="Node3D" parent="."]
script = ExtResource("1_tbgi4")
enemy_scene = ExtResource("2_tefeu")
human_scene = ExtResource("7_85g3d")

[node name="Player" type="Node3D" parent="."]

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.826555, 0.341721, -0.44725, -0.0198821, 0.81184, 0.583542, 0.562504, -0.473437, 0.677825, -3.93498, 3.52781, 5.96629)

[node name="Shaderbox" type="MeshInstance3D" parent="Camera3D"]
transform = Transform3D(8.9, 0, 0, 0, 4.76, 0, 0, 0, 2.99, -6.63102e-08, 3.54648e-08, -1.7614)
material_override = SubResource("ShaderMaterial_muem4")
mesh = SubResource("BoxMesh_trceg")
skeleton = NodePath("../..")
script = ExtResource("15_jkv2x")
cList = Array[Color]([Color(0, 0, 0, 1), Color(0.381339, 0.377011, 0.353786, 1), Color(1, 1, 1, 1), Color(1, 0.310206, 0.458974, 1)])

[node name="church" parent="." instance=ExtResource("8_choun")]

[node name="gargoyleMAP" parent="." instance=ExtResource("8_tipki")]
script = ExtResource("8_85g3d")

[node name="GBoy" parent="." node_paths=PackedStringArray("gspots") instance=ExtResource("9_85g3d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.41479, 1.43649, 2.17679)
gspots = [NodePath("../Lanes/Lane1/GSpot"), NodePath("../Lanes/Lane2/GSpot"), NodePath("../Lanes/Lane3/GSpot")]

[node name="GameplayManager" parent="." instance=ExtResource("12_eb6dy")]

[node name="GameUI" parent="." instance=ExtResource("13_trceg")]
